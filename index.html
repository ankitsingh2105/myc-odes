<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="prism.css">
  <title>Personal Code Collection</title>
</head>

<body>
  <h1 class="align">Javascript Code</h1>
  <pre>
        <code class="language-javascript">
{*TODO: The request() function is a function 
from the request library that can be used to
make HTTP requests. It takes a URL as its 
first argument and a callback function as 
its second argument.*}

let url = `https://newsdata.io/api/1/news?apikey=pub_10163278eca6ac85329caeafb15173ef67684&q=Sports`;
const request = require("request");
let app = document.querySelector("#app");
request(url, function (error, response, body) {
  if (error) {
    console.error(error);
  } else {
    let check = JSON.parse(body);
    console.log(check);
    let check2 = check.results
    check2.forEach((element , index) => {
        app.innerHTML+=`${index+1}. ${element.title} <br/><br/>`
    });
  }
});

        </code>
    </pre>
  <h1 class="align">React Contest Api</h1>
  <h3 class="align">how to use useContest hook</h3>
  <h4>This is the App.js</h4>
  <pre>
      <code class="language-javascript">
import "./styles.css";
import One1 from "./One1.jsx";
import One from "./One.jsx";
import { createContext } from "react";
const Count = createContext();
const Count2 = createContext();
let contextValue = [
  {
  foo: 'bar',
  baz: 42,
  number : 12,
},
{
  foo:'bar2',
  baz: 422,
  number : 122,
}];
const contextValue2 = [{
  foo: 'ba222r',
  baz: 42222,
  number : 12
}];
export default function App() {
  return (
    <div className="App">
      <h1>Hello CodeSandbox</h1>
      <Count.Provider  value = {contextValue} >
      <Count2.Provider  value = {contextValue2} >
          <One1/>
          <One/>
      </Count2.Provider>
      </Count.Provider>
    </div>
  );
}


this is the one1.jsx 


export {Count , Count2};

import React, { useContext, useEffect, useState } from "react";
import { Count, Count2 } from "./App.js";
export default function One1({ name, surname, standard }) {
  const ee = useContext(Count);
  const l = useContext(Count2);
  const [value, setvalue] = useState(ee);
  function changing() {
  setvalue((r) => r.map((e) => {
    return {
      ...e,
      number: e.number + 1
    };
  }));
    console.log(value[0].number, "and", value[1].number);
  }
  return (
    <>
      <button onClick={changing}> Click me </button>
    </>
  );
}

      </code>
    </pre>
  </code>
  </pre>


  <h1 class="align">Using redux</h1>
  <h3 class="align">replacing multiple hooks</h3>
  <h4>This is the App.js</h4>
  <pre>
      <code class="language-javascript">
import "./styles.css";
// import One1 from "./One1.jsx";
// import One from "./One.jsx";
// import Second from "./Second";
// import Two from "./Two";
// import { BrowserRouter, Routes, Route } from "react-router-dom";
import { useReducer, useRef } from "react";
export default function App() {
  const ank = useRef(null);
  const initial = {
    counter: 0,
    color: "red"
  };
  const reducer = (state, action) => {
    switch (action.type) {
      case "inc":
        return { ...state, counter: state.counter + 1 };
      case "dec":
        return { ...state, counter: state.counter - 1 };
      case "ChangeColor":
        ank.current.style.background = state.color;
        return { ...state, color: state.color === "red" ? "skyblue" : "red" };
      default:
        return state;
    }
  };
  const [state, dispatch] = useReducer(reducer, initial);
  return (
    <div className="App">
      <h1>Welcome to redux</h1>
      <div>{state.counter}</div>
      <br />
      <button
        onClick={() => {
          dispatch({ type: "inc" });
        }}
      >
        Inc{" "}
      </button>{" "}
      &nbsp; &nbsp;
      <button
        onClick={() => {
          dispatch({ type: "dec" });
        }}
      >
        Dec
      </button>
      <br />
      <br />
      <div ref={ank} style={{ background: state.color }}>
        This is colring{" "}
      </div>
      <br />
      <button
        onClick={() => {
          dispatch({ type: "ChangeColor" });
        }}
      >
        Change
      </button>
    </div>
  );
}
        

      </code>
    </pre>
<h1 class="align">Node js tutorials L-1</h1>
<h3 class="align">Module reading and appending and deleteing</h3>
<h4>moules- fs , adding , appending , renaming , deleting , creating a folder</h4>
<pre>
<code class="language-javascript">
const fs =  require('fs');
const newFolder =  "./NewFolf";

// Creating a new folder, callback required
fs.mkdir(newFolder , (sucess)=>{
        if(sucess){
            console.log("folder created sucessfully");
        }
        else{
            console.log("some error occured");
        }
});

//  creating a new file and adding data to it 
fs.writeFileSync("./NewFolf/ank.txt" , "new text on the way");

//  appending data to the existing file

fs.appendFileSync("./NewFolf/ank.txt" , "\nthis is the added version");


//  adding another file so that i can delete it.

fs.writeFileSync("./Newfolf/newFile.txt" , "This is the new file and\nthis is the first addition");

// removed a file from a folder

fs.unlink("./NewFolf/newFile.txt" , (e)=>{
        if(e){
            console.log("sucessully removed the file");
        }
        else {
            console.log("something went wrong");
        }
} )
  
</code>
</pre>

<h1 class="align">Node js tutorials L-2</h1>
<h3 class="align">Module reading and appending and deleteing</h3>
<h4>moules- fs , adding , appending , renaming , deleting , creating a folder</h4>
<pre>
<code class="language-javascript">
const fs = require("fs");
// adding data using asyncs function
fs.writeFile("newFile.txt", "this is the data" , (error)=>{
    if(error){
        console.log("Some error occured");
    }
    else{
        console.log("No error occured")
    }
})

// appending data using async function

fs.appendFile("newFile.txt" , "\nthis is a appendned data" , (error)=>{
    if(error){
        console.log("some error occured");
    }
    else{
        console.log("file appended with new data sucussfully");
    }
})

// reading file using a async function, way;

fs.readFile("newfile.txt" , (error , data)=>{
    if(error){
        console.log("some error occured here");
    }
    else {
        console.log("reading file without errors");
        const newData = data.toString();
        console.log(newData);  
    }
} ) 
</code>
</pre>

<h1 class="align">Node js tutorials L-3</h1>
<h3 class="align">Creating web servers</h3>
<h4>making a https request</h4>
<pre>
<code class="language-javascript">
import https from "https";
import chalk from "chalk";
// creating a server
const color = chalk.yellow.underline.inverse;
const server = https.createServer((req , res)=>{
    res.end("halloo");
})

// listening to the port at something 
server.listen(3000 , "127.0.0.1" , ()=>{
    console.log(color("listening to the server at 3000"));
});
</code>
</pre>

<h1 class="align">Node js tutorials L-4</h1>
<h3 class="align">Node routing</h3>
<h4>handled https requests</h4>
<pre>
<code class="language-javascript">
import http from "http";
import chalk from "chalk";
import url from "url";
import { read, write } from "fs";

const port = 9090;
const color = chalk.red.underline.inverse;

const server = http.createServer((req, res) => {
    res.setHeader('Content-Type', 'text/plain');
    if (req.url === '/') {
        res.end("Hello and welcome to the home page of the website");
    }
    else if (req.url === "/about") {
        res.end("hamare baare mein jaankar kya karoge hum dil mein aate hai samaja m nhi")
    }
    else if (req.url === "/contact") {
        res.end("NUMBER TOH SIRF LADKIYON KO DETA HU");
    }
    else {
        res.writeHead(404 , {"Content-type" :"text/html"});
        res.end("404 error occured")
    }
});

// listening to the port at something 
server.listen(port, (error) => {
    if (error) {
        console.log(color("something went wrong here"));
    }
    else {
        console.log(color("stated listening to the port"));
    }
});
  
</code>
</pre>
<h1 class="align">Node js tutorials L-5</h1>
<h3 class="align">json to object </h3>
<h4>and vice versa</h4>
<pre>
<code class="language-javascript">
import chalk from "chalk";
import fs from "fs"
const color1 = chalk.white.underline.inverse;
const color3 = chalk.green.underline.inverse;
const color2 = chalk.red.underline.inverse;

// making a object
const data = {
    name : "Ankit Singh Chauhan" , 
    class : "Dhant",
    school : "Gurukul International"
}

// converting to JSON file
const jsonData =  JSON.stringify(data);
console.log(color1(jsonData));

//  converting back to object;
const newObj = JSON.parse(jsonData);
// console.log(newObj)

fs.writeFile("new.json" , jsonData , (error)=>{
  // callback hell hrererererere!!
    console.log(error);
})

fs.readFile("new.json" , "utf-8" , (err , data)=>{
    const originalData = JSON.parse(data);
    console.log(originalData);
    console.log(data);
})
</code>
</pre>
<h1 class="align">Node js tutorials L-6</h1>
<h3 class="align">Making an API</h3>
<h4>made and apii</h4>
<pre>
<code class="language-javascript">
import http from "http";
import chalk from "chalk";
import url from "url";
import fs from "fs";

const port = 9090;
const color = chalk.red.underline.inverse;

const server = http.createServer((req, res) => {

  // fetching data at the end to avoid fetching again,
    const newData = fs.readFileSync("new.json" , "utf-8");

    res.setHeader('Content-Type', 'text/plain');
    if (req.url === '/') {
        res.end("Hello and welcome to the home page of the website");
    }
    else if (req.url === "/about") {
        res.end("hamare baare mein jaankar kya karoge hum dil mein aate hai samaja m nhi")
    }
    else if (req.url === "/contact") {
        res.end("NUMBER TOH SIRF LADKIYON KO DETA HU");
    }
    else if (req.url === "/apis") {
        res.writeHead(200 , {"Content-type" : "Json - data"});
        res.end(newData);
    }
    else {
        res.writeHead(404 , {"Content-type" :"pdf"});
        res.end("404 error occured")
    }
});

// listening to the port at something 
server.listen(port, (error) => {
    if (error) {
        console.log(color("something went wrong here"));
    }
    else {
        console.log(color("stated listening to the port"));
    }
});

</code>
</pre>
<h1 class="align">Node js tutorials L-8</h1>
<h3 class="align">Stream in node js</h3>
<h4>build in events in node js </h4>
<pre>
<code class="language-javascript">
import http from "http";
import chalk from "chalk";
import url from "url";
import fs from "fs";
import EventEmitter from "events";
let color =  chalk.yellow.underline.inverse;
let color1 =  chalk.red.underline.inverse;
let color2 =  chalk.blue.underline.inverse;
let event = new EventEmitter() ; 
const port =9090; 
const server = http.createServer();
server.on("request" , function(req , res){
    const rstream = fs.createReadStream("newJSON.json");
    rstream.on("data" ,(data)=>{
        res.end(data);
    })
    rstream.on("error" , ()=>{
        res.end("soemthing went wrong here")
    })
    rstream.on("end" , ()=>{
        res.end();
    })
    <!--  Instead of writing all this we can use pipe -->
    //  reading file
    const rstream = fs.createReadStream("newJSON.json");
    //  writing file using pipes
    rstream.pipe(res);

})

server.listen(port , (error)=>{
    if(error){
        console.log(error);
    }
    else{
        console.log("good work!!");
    }
})


// In Node.js, there are several built-in events that are related to streaming data. These events are emitted by stream objects, which allow you to read or write data in a continuous flow.

// Some examples of built-in events related to streaming in Node.js include:

// 'data': emitted when data is available to be read from a readable stream
// 'end': emitted when there is no more data to be read from a readable stream
// 'drain': emitted when a writable stream is no longer full and can accept more data
// 'error': emitted when an error occurs in a stream
// 'finish': emitted when all data has been written to a writable stream
</code>
</pre>


<h1 class="align">Node js tutorials L-9</h1>
<h3 class="align">making a weather app</h3>
<h4>api fetching using `requests`</h4>
<pre>
  <code class="language-html"  >
    <h1>give and take</h1>
    <div>The  temp is -></div>
    <div>{+temp=}</div>
    //this will be replaced -->
</html>`
  </code>
</pre>
<pre>
<code class="language-javascript">
  import http from "http";
  import fs from "fs";
  import requests from "requests";
  const htmlFile = fs.readFileSync("index.html" , "utf-8");
  const port  = 9090;
  console.log("ok");
  const url = "https://api.openweathermap.org/data/2.5/forecast?q=Nainital&appid=605b5adc1b1f5d216518eb1c953c563d";
  const replaceval = (original)=>{
    let temp = htmlFile.replace("{+temp=}", original.list[0].main.temp);
    temp = temp.replace("{+temp=}", original.list[0].main.humidity);
    return temp;  
  }
  
  const server = http.createServer((req , res)=>{
      if(req.url==="/"){
          requests(url).on("data" , (data)=>{
              const newData = JSON.parse(data);
              const newOpen = [newData];
              const reatimedata = newOpen.map((e)=>{
                  return replaceval(e);
              }).join("")
              console.log("is this -> " , reatimedata);
              res.write(reatimedata);
          }).on("end" , (error)=>{
              console.log(error);
              res.end(); 
          })
      }
  })
  
  server.listen(port , (error)=>{
      if(error){
          console.log("something went wrong");
      }
      else{
          console.log("ok!");
      }
  })
</pre>


</body>
<script src="prism.js"></script>

</html>